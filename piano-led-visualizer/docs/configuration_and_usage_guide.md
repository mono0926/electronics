# 設定・活用ガイド 🌈

物理的な設置が完了したら、いよいよソフトウェアを微調整して、あなたのピアノに最適化させましょう。

---

## 🛠 Web インターフェースの使いこなし

ブラウザで `http://pianoledvisualizer.local` を開きます。

### 1. マッピング調整 (LED Settings)

ピアノの鍵盤と LED の位置を「ピクセル単位」で同期させます。

- **LED Count**: 使用している LED の総数（例: 172個）。
- **Shift**: 演奏してみて光が左右にズレている場合、この値を `1` や `-1` などに変えて調整します。
- **Reverse**: LED テープを左右逆さまに設置してしまった場合は、ここをONにするだけで解決します。

### 2. MIDI ポート設定 (Ports)

- ピアノを USB 接続すると、Ports タブにデバイス名が表示されます。
- 使用するピアノを選択して `Save` を押してください。これでピアノを弾くと LED が反応するようになります。

---

## 🎓 高度な活用方法

### 1. Synthesia との連携

外部の PC/タブレットで Synthesia を動かし、次に弾くべき鍵盤を LED でガイドさせることができます。

- **設定方法**: Synthesia の MIDI 出力先に `PianoLEDVisualizer` を指定します。
- **メリット**: 楽譜が読めなくても、光を追うだけで曲を覚えることができます。

### 2. 録音と再生 (Songs)

自分の演奏を MIDI ファイルとして保存できます。

- Web UI の `Songs Management` から録音を開始・停止できます。
- 録音したファイルはダウンロードして Mac で編集したり、そのまま LED で再生したりすることが可能です。

### 3. カラーとアニメーション

- **Colormaps**: 虹色、炎のような色、落ち着いた青など、多くのプリセットがあります。
- **Fading Speed**: キーを離した後に光が消えるまでの「余韻」を調整できます。長くすると幻想的になります。

---

## 🛠 トラブルが起きたら

- **Q: 反応が遅い (レイテンシ)**
  - A: Raspberry Pi Zero 2 W であれば通常は低遅延です。バックグラウンドで重い作業（アップデート等）が走っていないか確認してください。
- **Q: 特定の鍵盤だけ光らない**
  - A: MIDI 信号は届いていますか？ Web UI のログ画面で、鍵盤を押した時に信号が表示されるか確認してください。届いている場合は、`LED Settings` のマッピングがズレている可能性があります。

---

これで、あなたの Piano LED Visualizer はフル活用できる状態になりました！
自分好みのライティングで、毎日のピアノ練習をもっと楽しく彩ってくださいね。🎹✨
