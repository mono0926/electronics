# Raspberry Pi 超初心者向けガイド 🍓

このガイドは、「初めて Raspberry Pi（ラズパイ）という基板を買ったけど、どう扱えばいいのか怖い・分からない」という方向けの超基礎知識をまとめたものです。
ピアノLEDプロジェクトなど具体的な工作に入る前に、まずはラズパイそのものと仲良くなりましょう！

---

## 🛑 壊さないための「絶対に守る3つのルール」

精密機器であるラズパイは、扱い方を間違えると一瞬で壊れてしまいます（マジです）。以下の3つだけは常に守ってください。

### 1. 静電気に注意（触る前に放電！）

冬場などは特に危険です。バチッときただけで基板上のミクロな回路が破壊されます。
**対策**: ラズパイを触る前に、部屋のドアノブや金属製の机の脚などを触って、体の静電気を逃がす癖をつけましょう。

### 2. 基板の「フチ（端っこ）」を持とう

金色の端子部分、トゲトゲのピン（GPIOピン）、中央の黒いチップ（CPU）などを直接指でベタベタ触らないでください。手の脂や微弱な静電気が故障の原因になります。
**対策**: 基板のフチ（緑色や緑青色の部分）を、親指と人差し指でそっとつまむように持ちましょう。

### 3. 水気と「机の上の金属」に注意（ショート防止）

通電中（電源が入っている時）に、水滴が落ちたり、机の上に転がっていた金属製のクリップやネジが基板の裏側に触れたりすると、電気が本来流れてはいけない場所に流れ（ショート）、一瞬で煙が出ます。
**対策**: 作業する机の上は綺麗に片付け、液体の入ったコップなどは遠ざけておきましょう。

---

## 🗺️ どこに何があるの？（Zero 2 W / WH の場合）

手のひらサイズの小さな基板ですが、立派なパソコンです。各部品の役割を覚えましょう。

1. **MicroSDカードスロット**: 裏側の端にあります。これが「ハードディスク（ストレージ）」の代わりになります。ここにOS（脳みそ）を書き込んだSDカードをカチッと挿し込みます。
2. **MicroUSBポート (2つ並んでいるところ)**:
   - **外側（カドに近い方）**: `PWR IN` と書かれています。**電源専用**です。後述しますが、ここにACアダプターを繋ぎます。
   - **内側（中央に近い方）**: `USB` と書かれています。キーボードやマウスなどのUSB機器を繋ぐための「データ通信用」です。ピアノ本体と通信する際にもここを使ったりします。
3. **mini HDMIポート**: 大きい方の銀色の長方形。ディスプレイ（モニター）やテレビに画面を映すときに使います。
4. **GPIOピン**: ずらっと並んだ40本のトゲトゲのピン。ラズパイ最大の魅力です。ここからLEDを光らせるための信号を出したり、スイッチが押されたことを検知したりします。
5. **CPU**: 中央にある一番大きな黒い四角。これが計算を行う中枢です。激しく動かすと熱くなります。

> [!NOTE]
> **この小さな基板、昔のパソコンで言うとどれくらい？**
> Raspberry Pi Zero 2 WH の頭脳（CPU）は、およそ **2005年〜2010年頃のデスクトップパソコン（Intel Pentium 4 など）と同等クラスの計算パワー** を持っています。
> 現代の最新Macなどと比べると非力ですが、それでも「Windows XP 後期や Windows 7 初期」のパソコンが丸ごとフリスクサイズの基板に収まっていると考えると、ちょっとロマンを感じませんか？
> （軽いサーバー用途や、今回のようなピアノLEDの制御をするには十分すぎるほどのオーバースペックです！）

---

## ⚡ 初期設定用の電源（USB充電器）の選び方

このガイドに沿って「とりあえずラズパイ単体で動かす」段階においては、LED用の巨大な電源（30W超のACアダプター）は使いません。
**スマホ用のUSB充電器（ACアダプタ）** と **Micro USBケーブル** を用意してください。必要なスペック（ワット数）は以下の通りです。

- **公式推奨**: **5V 2.5A (12.5W)** - もし新しく買うならこの容量以上があれば確実です。
- **実用ライン**: **5V 1A〜2A (5W〜10W)** - USBハブなどを繋がず、今回のようにWi-FiとSSHだけで動かす分には、家で余っているようなスマホの充電アダプターや、パソコンのUSBポートからの給電でも全く問題なく動きます。

> **注意**: ピアノLEDが完成して本番稼働する際には、この「Micro USBからの給電」は**基本的には行いません**。LEDテープが爆発的に電力を消費するため、大容量のACアダプター（DCジャック）から入ってきた5V電源を、配線を分岐させて「LEDテープ」と「ラズパイのGPIOピン（5Vピン）」の両方に同時に供給する構成にするからです。（ラズパイをUSBから、LEDをACアダプタからと、あえて2つの電源を使う分けることも可能ですが、コンセントが2つ必要になるため一般的には1つの大容量ACアダプタから分岐して共通の電源として供給します）。

---

## 🌐 起動からインターネットへの第一歩（動作確認フロー）

ピアノLED本番環境で使う **「Raspberry Pi OS Lite」** （画面を持たない軽量版）を前提に、電源を入れてからインターネットと通信できるまでの基本的な流れを解説します。

### STEP 1: 魔法のソフト「Imager」での準備が命！

「Raspberry Pi Imager」というソフトを使ってOSをSDカードに書き込む際、**「歯車マーク（詳細設定）」が全てを決める**と言っても過言ではありません。

- **Wi-Fi設定**: 自宅のSSIDとパスワードを正しく入れる。
- **SSHの有効化**: これをONにしないと手元のMacから遠隔操作できなくなります。
- **ユーザー名とパスワード**: 好きなものを設定します（例: `pi` と `raspberry` など）。
  この設定を仕込んだSDカードをラズパイに奥まで挿し込みます。

### STEP 2: 最初の通電。「生きてるか」の確認

ラズパイには電源ボタンがありません。**「電源ケーブルを（一番外側の `PWR IN` に）挿す＝電源ON」**です。

- **基板のLED観察**:
  電源を挿した直後、基板上の**緑色の小さなLEDチップ（ACT LED）**を見てください。チカ…チカチカッ…と不規則に点滅し始めれば、SDカードからOSを読み込んで「起動中」の健全な証拠です。（全く光らない場合は通電ミスかSDカードが読めていません）。
- **【重要】数分間「待機」する**:
  初回起動時はファイルの展開等で裏で忙しく働いています。LEDが点滅から「ずっと点灯（あるいはたまに光るだけ）」に落ち着くまで、**最低でも2〜3分は触らずに待って**ください。

### STEP 3: Macのターミナルから「接続（SSH）」

ラズパイ本体は机の隅に置いたまま、手元のMacの「ターミナル（黒い画面のアプリ）」を開きます。
ここで **SSH（エスエスエイチ）** という魔法の呪文を使います。

```bash
ssh ユーザー名@設定したホスト名.local
```

- ※初回は `Are you sure you want to continue connecting` と聞かれるので `yes` と入力します。
- ※次にパスワードを聞かれます。**打ち込んでも画面には「\*」すら出ませんが、裏では入力されている**ので、自信を持って打ち込んでEnterを押してください。

### STEP 4: インターネット（外の世界）と通信できているか確認

SSH接続に成功し、緑色の文字でラズパイ内の画面に切り替わったら、ラズパイ自身が本当にインターネットの海に出られているか確認します。「ping」という小石を投げて返ってくるかを見るコマンドです。

```bash
ping -c 4 google.com
```

`64 bytes from ... time=xx ms` のような行が4回出てくれば、Wi-Fiに繋がり、無事に世界と繋がった立派なコンピューターとして活動を始めている証拠です！おめでとうございます！

> [!NOTE]
> **本番環境（OS Lite）ではブラウザ（Chrome等）は開きません**
> ピアノLEDでは「ラズパイの中にWebサーバーを立ち上げ、それを手元Macのブラウザから見に行く」使い方をするため、ラズパイ自身にはブラウザ画面を表示する機能を持たせていません。

---

## 📺 補足：BOMにある「HDMIケーブル」の本当の使い道

「Lite OSでは画面が出ないのに、なぜHDMIケーブルを買うの？」と疑問に思うかもしれません。これは**絶対に必要な「お守り（命綱）」**だからです。

もしWi-Fi設定を誤り、STEP 3で **「MacからSSHで繋がらない！」** となった時、ラズパイは完全なブラックボックスになります。
そんな時、このHDMIを家のテレビに、余っているキーボードをUSB端子に繋いでください。
（※必ず**電源を入れる前に**HDMIを繋ぐこと）

デスクトップ画面こそ出ませんが、**黒い背景に白い文字（ターミナル画面）が直接テレビに映ります**。ここでキーボードから直接ログインして設定を修正したり、何のエラーが出ているかをのぞき見できる「唯一のレスキューツール」となるのです。

> [!TIP]
> **「やっぱり普通のデスクトップ画面やブラウザも見てみたい！」という方へ**
> 余力があれば、本番のLite OSを焼く前に、Imagerで普通の「Raspberry Pi OS (32-bit等)」を焼いてHDMIを繋いでみてください。MacやWindowsのようにマウスカーソルがあり、Chromiumブラウザを開いてYouTubeが見られる「普通の超小型パソコン」としての体験ができます。（動く実感と安心感を得たら、改めてピアノLED用にLite OSで焼き直しましょう！）

---

## 🔌 電源の切り方（超重要）

ラズパイは立派なパソコン（Linux）です。「使い終わったから」といって、いきなりブチッと電源ケーブルを引っこ抜かないでください。
書き込み中に電源が切れると、**SDカードの中身のデータが破壊され、二度と起動しなくなります**（これを「OSが飛ぶ」と呼びます）。

**正しい電源の切り方**:

1. 本来は、繋いでいるMacのターミナルから `sudo shutdown -h now` というコマンドを打つか、ピアノLED用であればWeb画面のメニューから「Shutdown」ボタンを押して終了させます。
2. コマンド実行後、ラズパイ基板上の緑色のLEDが10回連続でチカチカチカッと早く点滅し、その後スッと完全に消灯します（または点きっぱなしのまま一切動かなくなります）。
3. その状態（完全にシャットダウンの処理が終わった状態）になって初めて、ACアダプター（電源ケーブル）を抜いてください。
