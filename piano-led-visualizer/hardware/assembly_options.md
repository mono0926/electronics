# 基板構成の比較: スタッキング vs 横並び

Pi Zero + ディスプレイ + レベルシフタを **どう配置するか** の2案を整理します。
どちらを選んでも済むように、部品は両方分を揃えることを推奨（差額は数百円程度）。

> [!NOTE]
> **独自アレンジについて**
> ベースとなる `onlaj/Piano-LED-Visualizer` リポジトリでは「案A（スタッキング）」が標準とされていますが、本ドキュメント群では、日本国内での部品調達のしやすさと、高負荷時の熱対策・安定性を重視し、**「案B（横並び）」を本プロジェクト独自の推奨構成として提案**しています。

---

## 案A: スタッキング（二段重ね）

Pi Zero の GPIO ヘッダに **連結ピンソケット** を使い、ディスプレイ基板を上に重ねる構成。

```
┌─────────────────────────┐
│   1.44" TFT ディスプレイ │  ← 上段
├─────────────────────────┤
│ [連結ピンソケット 13.5mm]│  ← C-110702
├─────────────────────────┤
│   Raspberry Pi Zero 2 W │  ← 下段
└─────────────────────────┘
  レベルシフタはPi側基板に実装
```

### メリット

- **超コンパクト**: Pi Zero のフットプリントだけで済む
- **公式プロジェクトの標準構成**: Piano LED Visualizer の作例はほぼこの方式

### デメリット

- **配線が窮屈**: レベルシフタやコンデンサの配置場所が限られる
- **ヒートシンクとの干渉**: SoCの上にディスプレイが来るため、放熱に制約が出る
- **デバッグしにくい**: 問題が起きた時に上段を外す手間がかかる

### 必要な追加部品

| 部品                      | 型番                                                          | 価格 |
| :------------------------ | :------------------------------------------------------------ | :--- |
| 連結ピンソケット 2x20     | [秋月 C-110702](https://akizukidenshi.com/catalog/g/g110702/) | ¥150 |
| Pi Zero用ユニバーサル基板 | [秋月 114031](https://akizukidenshi.com/catalog/g/g114031/)   | ¥200 |

---

## 案B: 横並び（大きめユニバーサル基板）

大きなユニバーサル基板に Pi Zero・ディスプレイ・レベルシフタを **横に並べて** 配置する構成。

![横並び基板イメージ (※この画像は生成AIによるイメージです。実際の配線や部品の見た目とは異なる場合があります。)](../docs/assets/layout_option_b.png)

```
┌───────────────────────────────────────────┐
│                                           │
│  ┌──────────┐  ┌──────┐  ┌────────────┐  │
│  │ Pi Zero  │  │74AHC │  │ 1.44" TFT  │  │
│  │ 2 WH     │  │T125N │  │ ディスプレイ│  │
│  └──────────┘  └──────┘  └────────────┘  │
│                                           │
│  (コンデンサ, 抵抗, ヒューズH等も配置可)  │
└───────────────────────────────────────────┘
  約 70×90mm 以上のユニバーサル基板
```

### メリット

- **配線がしやすい**: 各部品間にスペースがあり、ハンダ付けミスが減る。
- **ヒートシンク装着自由**: SoC上にスペースがあるので大型ヒートシンクも可（**高負荷時の熱暴走を防ぐ最大のメリット**）。
- **デバッグが楽**: すべてが見える状態で動作確認できる。
- **レベルシフタのICソケットも余裕を持って配置できる**。

### デメリット

- **サイズが大きい**: ケースの設計・配置に影響する
- **Pi をピンヘッダ + ワイヤで接続**: 直挿しではなくジャンパ配線が必要

### 必要な追加部品

| 部品                  | 型番                                                                         | 価格 |
| :-------------------- | :--------------------------------------------------------------------------- | :--- |
| ユニバーサル基板 (大) | [秋月 100518 (95×72mm)](https://akizukidenshi.com/catalog/g/g100518/)        | ¥60  |
| ピンヘッダ 1x40       | [秋月 100167](https://akizukidenshi.com/catalog/g/g100167/) (カットして使用) | ¥35  |

> [!TIP]
> この方式でも連結ピンソケットがあると、Piを基板に直挿し＋取り外し可能にできるので便利です。

---

## 比較表

| 観点               | 案A: スタッキング    | 案B: 横並び          |
| :----------------- | :------------------- | :------------------- |
| **サイズ**         | ◎ 最小 (65×30mm)     | △ 大きい (70×90mm〜) |
| **組み立てやすさ** | △ 窮屈               | ◎ 余裕あり           |
| **デバッグ**       | △ 上段を外す必要あり | ◎ 全部見える         |
| **放熱**           | △ ヒートシンクに制約 | ◎ 自由               |
| **見た目**         | ◎ スッキリ           | ○ 機能的             |
| **作例の多さ**     | ◎ 多い               | △ 少ない             |
| **追加コスト**     | ¥350 程度            | ¥100 程度            |

---

## 結論: 案B（横並び）を強く推奨

本プロジェクトでは、長時間の稼働における熱対策と安定性の観点から、**案B（大型ユニバーサル基板での横並び）を標準構成として推奨**します。

極限までケースを小さくしたい、または公式設計（`RPICaseModel.stl`）をそのまま使いたい場合のみ、案A（スタッキング）を選択してください。

> [!IMPORTANT]
> どちらの案でも以下は共通で必要:
>
> - ICソケット (14P, レベルシフタ用)
> - 抵抗 (330Ω)
> - コンデンサ (1000μF)
> - ヒートシンク
