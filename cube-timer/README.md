# スピードキューブ・タイマー 🧊⏱

Pinecil V2 × Bambu Lab P2S × Arduino で作る、ルービックキューブ用のスピードキューブ・タイマーです。

## 概要

競技用タイマー（Stackmat）のように、両手をパッドに置いてからスタートし、解き終わったら両手を戻して止める方式のタイマーです。

```
┌──────────────────────────────┐
│    ┌──────────────────┐      │
│    │   00.000 秒      │      │  ← OLEDディスプレイ
│    └──────────────────┘      │
│                              │
│   ┌─────┐        ┌─────┐    │
│   │ 左手 │        │ 右手 │    │  ← タッチセンサーパッド
│   └─────┘        └─────┘    │
└──────────────────────────────┘
         3Dプリント筐体
```

## 機能

- ⏱ ミリ秒精度のタイム計測
- 🤚 両手タッチパッド方式（Stackmat風）
  - 両手を置く → 準備完了（表示が緑 or ビープ音）
  - 両手を離す → タイマースタート
  - 両手を戻す → タイマーストップ
- 📊 記録管理
  - 直近タイム表示
  - Best (自己ベスト)
  - Avg of 5 / Avg of 12 (競技と同じ統計)
- 🔊 ビープ音（スタート/ストップ）
- 🖨 筐体は完全3Dプリント

## パーツリスト

| #   | パーツ                | 型番 / 仕様                      | Amazon検索キーワード            | 概算価格             | 備考                                       |
| --- | :-------------------- | :------------------------------- | :------------------------------ | :------------------- | :----------------------------------------- |
| 1   | **Arduino Nano**      | ATmega328P互換機 (USB-C推奨)     | 「Arduino Nano 互換 USB-C」     | ¥500〜800            | 制御メイン。タイマー精度◎                  |
| 2   | **OLEDディスプレイ**  | 1.3インチ I2C SSD1306 (白 or 青) | 「OLED 1.3インチ I2C」          | ¥500〜800            | タイム表示用。0.96インチより大きく見やすい |
| 3   | **タッチセンサー** ×2 | TTP223 静電容量式                | 「TTP223 タッチセンサー」       | ¥300〜500 (複数個入) | 左右の手検知用                             |
| 4   | **アクティブブザー**  | 5V                               | 「アクティブブザー 5V Arduino」 | ¥300                 | スタート/ストップ音                        |
| 5   | **配線材**            | ジャンプワイヤ各種               | 「ジャンプワイヤ セット」       | ¥500                 | すでに持っていれば不要                     |
| 6   | **筐体**              | 3Dプリント                       | —                               | ¥0                   | PLAまたはPETG                              |
|     | **合計**              |                                  |                                 | **約¥1,600〜¥2,400** |                                            |

## 配線図

```
Arduino Nano
├── A4 (SDA) ──────── OLED SDA
├── A5 (SCL) ──────── OLED SCL
├── D2 ────────────── タッチセンサー (左手) SIG
├── D3 ────────────── タッチセンサー (右手) SIG
├── D8 ────────────── ブザー SIG
├── 5V ────────────── OLED VCC / タッチセンサー VCC / ブザー VCC
└── GND ───────────── OLED GND / タッチセンサー GND / ブザー GND
```

## ソフトウェア設計

### 状態遷移

```
[IDLE] ──(両手タッチ)──→ [READY] ──(両手リリース)──→ [RUNNING]
  ↑                                                      │
  └──────────────────(両手タッチ)──── [STOPPED] ←─────────┘
```

| 状態        | 表示                      | 動作                     |
| :---------- | :------------------------ | :----------------------- |
| **IDLE**    | 前回タイム or "Ready"     | 入力待ち                 |
| **READY**   | "0.000" (点滅 or 緑表示)  | 両手がパッドに触れている |
| **RUNNING** | カウントアップ中          | 時間を計測中             |
| **STOPPED** | 最終タイム表示 + Best/Avg | 記録を保存               |

### 必要なライブラリ

- `Adafruit_SSD1306` — OLEDディスプレイ制御
- `Adafruit_GFX` — グラフィックス描画
- `Wire` — I2C通信 (標準ライブラリ)

## 3Dプリント筐体

### 設計方針

- 2パーツ構成: ベース + リッド（スナップフィット or ネジ止め）
- OLEDの窓穴
- タッチセンサーは筐体表面に露出 or 薄い壁越しに反応させる
- USB-C アクセス用の開口部
- 底面にゴム足用の穴（滑り防止）

### 推奨素材

- **筐体:** PLA or PETG（どちらでもOK）
- **タッチパッド部分:** 導電性フィラメントまたは銅テープを貼付

## 組み立て手順

1. パーツ購入 & 到着待ち
2. 筐体を3Dプリント
3. ブレッドボードで仮組み & ファームウェア動作確認
4. はんだ付けで本配線（Pinecil V2のお仕事！）
5. 筐体に組み込み
6. 完成 & テスト 🎉

## フォルダ構造

```
cube-timer/
├── README.md          ← このファイル
├── firmware/          ← Arduinoスケッチ
│   └── cube_timer/
│       └── cube_timer.ino
├── models/            ← 3Dモデル (STL, 3MF, CAD)
│   ├── case_base.stl
│   └── case_lid.stl
└── docs/              ← 回路図、写真など
    └── wiring.md
```
